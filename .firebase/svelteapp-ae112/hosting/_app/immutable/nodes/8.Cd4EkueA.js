import{s as Z,e as b,t as N,a as D,c as v,b as g,d as O,f as A,g as H,m as Y,o as m,q as $,i as tt,h as o,F as et,j as G,n as K,k as Q}from"../chunks/scheduler.B0JEHspW.js";import{S as at,i as rt}from"../chunks/index.jKw0lUt7.js";import{p as st}from"../chunks/stores.DKWksBp8.js";import{p as ot,i as nt,a as lt}from"../chunks/entry.7gQ7v3rf.js";import{u as it}from"../chunks/firebase.oGd3CV5t.js";function ct(e){const t=JSON.parse(e);return t.data&&(t.data=ot(t.data)),t}function W(e){return HTMLElement.prototype.cloneNode.call(e)}function ut(e,t=()=>{}){const c=async({action:a,result:i,reset:s=!0,invalidateAll:h=!0})=>{i.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(e),h&&await nt()),(location.origin+location.pathname===a.origin+a.pathname||i.type==="redirect"||i.type==="error")&&lt(i)};async function _(a){var f,C,w,p;if(((f=a.submitter)!=null&&f.hasAttribute("formmethod")?a.submitter.formMethod:W(e).method)!=="post")return;a.preventDefault();const s=new URL((C=a.submitter)!=null&&C.hasAttribute("formaction")?a.submitter.formAction:W(e).action),h=new FormData(e),y=(w=a.submitter)==null?void 0:w.getAttribute("name");y&&h.append(y,((p=a.submitter)==null?void 0:p.getAttribute("value"))??"");const x=new AbortController;let T=!1;const d=await t({action:s,cancel:()=>T=!0,controller:x,formData:h,formElement:e,submitter:a.submitter})??c;if(T)return;let n;try{const r=await fetch(s,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:h,signal:x.signal});n=ct(await r.text()),n.type==="error"&&(n.status=r.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;n={type:"error",error:r}}d({action:s,formData:h,formElement:e,update:r=>c({action:s,result:n,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:n})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",_),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",_)}}}function mt(e){var J;let t,c,_,a,i=e[0].bio+"",s,h,y,x=(((J=e[1].form)==null?void 0:J.problem)??"")+"",T,P,d,n,f,C='<span class="label-text">Your bio</span>',w,p,r,q,L,I="Update Bio",R,E,U,S,j,z;return{c(){t=b("main"),c=b("p"),_=N("Current Bio: "),a=b("span"),s=N(i),h=D(),y=b("p"),T=N(x),P=D(),d=b("form"),n=b("div"),f=b("label"),f.innerHTML=C,w=D(),p=b("textarea"),q=D(),L=b("button"),L.textContent=I,R=D(),E=b("a"),U=N("Finish"),this.h()},l(u){t=v(u,"MAIN",{class:!0});var l=g(t);c=v(l,"P",{});var M=g(c);_=O(M,"Current Bio: "),a=v(M,"SPAN",{class:!0});var F=g(a);s=O(F,i),F.forEach(A),M.forEach(A),h=H(l),y=v(l,"P",{class:!0});var V=g(y);T=O(V,x),V.forEach(A),P=H(l),d=v(l,"FORM",{method:!0});var k=g(d);n=v(k,"DIV",{class:!0});var B=g(n);f=v(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-p13vsy"&&(f.innerHTML=C),w=H(B),p=v(B,"TEXTAREA",{name:!0,class:!0}),g(p).forEach(A),B.forEach(A),q=H(k),L=v(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(L)!=="svelte-tqnit3"&&(L.textContent=I),k.forEach(A),R=H(l),E=v(l,"A",{href:!0,class:!0,style:!0});var X=g(E);U=O(X,"Finish"),X.forEach(A),l.forEach(A),this.h()},h(){var u;m(a,"class","text-info"),m(y,"class","text-error"),m(f,"for","bio"),m(f,"class","label"),m(p,"name","bio"),m(p,"class","textarea textarea-bordered textarea-accent"),p.value=r=e[0].bio,m(n,"class","form-control"),m(L,"class","btn btn-primary my-5"),m(d,"method","POST"),m(E,"href",S="/"+((u=e[2])==null?void 0:u.username)+"/edit"),m(E,"class","btn btn-primary"),$(E,"width","58%"),m(t,"class","max-w-lg prose text-center mx-auto my-6")},m(u,l){tt(u,t,l),o(t,c),o(c,_),o(c,a),o(a,s),o(t,h),o(t,y),o(y,T),o(t,P),o(t,d),o(d,n),o(n,f),o(n,w),o(n,p),o(d,q),o(d,L),o(t,R),o(t,E),o(E,U),j||(z=et(ut.call(null,d)),j=!0)},p(u,[l]){var M,F;l&1&&i!==(i=u[0].bio+"")&&G(s,i),l&2&&x!==(x=(((M=u[1].form)==null?void 0:M.problem)??"")+"")&&G(T,x),l&1&&r!==(r=u[0].bio)&&(p.value=r),l&4&&S!==(S="/"+((F=u[2])==null?void 0:F.username)+"/edit")&&m(E,"href",S)},i:K,o:K,d(u){u&&A(t),j=!1,z()}}}function dt(e,t,c){let _,a;Q(e,st,s=>c(1,_=s)),Q(e,it,s=>c(2,a=s));let{data:i}=t;return e.$$set=s=>{"data"in s&&c(0,i=s.data)},[i,_,a]}class _t extends at{constructor(t){super(),rt(this,t,dt,mt,Z,{data:0})}}export{_t as component};
